services:
  main:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        UID: ${USER_ID:?required}
        GID: ${GROUP_ID:?required}
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY:?required}
    tty: true
    stdin_open: true
    volumes:
      - .:/top
      - /top/node_modules
    ports:
      - 9229:9229
    command: "npm run start"
