services:
  main:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        UID: ${USER_ID:-1000}
        GID: ${GROUP_ID:-1000}
    tty: true
    stdin_open: true
    volumes:
      - claude_config:/home/node/.claude
      - /tmp/host-exec.sock:/tmp/host-exec.sock
      - ./scripts/host-exec:/usr/local/bin/host-exec:ro
    command: "claude"

volumes:
  claude_config:
